---
title: Layout
description: Understanding the layout system in dnd-grid
---

## Layout Structure

The layout is an array of `LayoutItem` objects that define the position and size of each grid item.

```tsx
import { type Layout } from "@dnd-grid/react";

const layout: Layout = [
  { i: "widget-1", x: 0, y: 0, w: 4, h: 2, deg: 0 },
  { i: "widget-2", x: 4, y: 0, w: 4, h: 2, deg: 0 },
  { i: "widget-3", x: 8, y: 0, w: 4, h: 2, deg: 0 },
];
```

## LayoutItem Properties

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `i` | `string` | Yes | Unique identifier (must match child's `key`) |
| `x` | `number` | Yes | X position in grid units |
| `y` | `number` | Yes | Y position in grid units |
| `w` | `number` | Yes | Width in grid units |
| `h` | `number` | Yes | Height in grid units |
| `deg` | `number` | No | Rotation in degrees (default: 0) |
| `minW` | `number` | No | Minimum width |
| `maxW` | `number` | No | Maximum width |
| `minH` | `number` | No | Minimum height |
| `maxH` | `number` | No | Maximum height |
| `static` | `boolean` | No | If true, item cannot be moved or resized |
| `isDraggable` | `boolean` | No | Override grid's `isDraggable` |
| `isResizable` | `boolean` | No | Override grid's `isResizable` |
| `isBounded` | `boolean` | No | Override grid's `isBounded` |

## Grid Units

Grid positions and sizes are expressed in **grid units**, not pixels.

```
┌───────────────────────────────────────────┐
│ cols = 12                                 │
├───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┤
│ 0 │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │ 9 │...│
├───┴───┴───┴───┴───┴───┴───┴───┴───┴───┴───┤
│                                           │
│  ┌───────────────┐                        │
│  │ x=0, y=0      │  w=4, h=2              │
│  │               │                        │
│  └───────────────┘                        │
│                                           │
└───────────────────────────────────────────┘
```

## Compaction

By default, items are compacted vertically to fill gaps. You can configure this behavior:

```tsx
<DndGrid
  compactType="vertical"   // Default: compact upward
  // compactType="horizontal" // Compact leftward
  // compactType={null}       // No compaction
/>
```

## Collision Handling

When items collide during drag, the grid can:

1. **Push items** (default) - Move other items out of the way
2. **Prevent collision** - Block movement into occupied space

```tsx
<DndGrid
  preventCollision={false}  // Default: push items
  // preventCollision={true} // Block movement
/>
```

## Overlap Mode

Allow items to stack on top of each other:

```tsx
<DndGrid
  allowOverlap={true}  // Items can overlap
/>
```

<Warning>
  When `allowOverlap` is true, compaction is automatically disabled.
</Warning>

## Updating Layout

The layout is controlled by your component state. Update it via the `onLayoutChange` callback:

```tsx
function MyGrid() {
  const [layout, setLayout] = useState(initialLayout);

  return (
    <DndGrid
      layout={layout}
      onLayoutChange={(newLayout) => {
        setLayout(newLayout);
        // Optionally persist to server
        saveLayout(newLayout);
      }}
    >
      {/* children */}
    </DndGrid>
  );
}
```

## Layout Persistence

To save and restore layouts, serialize the layout array to JSON:

```tsx
// Save
localStorage.setItem("grid-layout", JSON.stringify(layout));

// Restore
const savedLayout = JSON.parse(localStorage.getItem("grid-layout") || "[]");
```

<Tip>
  See the [LocalStorage example](/examples/localstorage) for a complete implementation.
</Tip>
