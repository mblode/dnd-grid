---
title: LocalStorage
description: Persist layout to localStorage and restore on page load.
---

<iframe
  src="https://dnd-grid.com/examples/localstorage?embed=true"
  width="100%"
  height="450"
  style={{ border: "1px solid #e5e7eb", borderRadius: "8px", marginBottom: "24px" }}
/>

## Code

```tsx
import { useState, useEffect } from "react";
import { DndGrid, type Layout } from "@dnd-grid/react";
import "@dnd-grid/react/dist/styles.css";

const STORAGE_KEY = "dnd-grid-layout";

const defaultLayout: Layout = [0, 1, 2, 3, 4, 5].map((i) => ({
  i: i.toString(),
  x: (i * 2) % 12,
  y: Math.floor(i / 6) * 2,
  w: 2,
  h: 2,
  deg: 0,
}));

export default function LocalStorageExample() {
  const [layout, setLayout] = useState<Layout>(defaultLayout);

  // Load from localStorage on mount
  useEffect(() => {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      try {
        setLayout(JSON.parse(saved));
      } catch {
        // Invalid JSON, use default
      }
    }
  }, []);

  // Save to localStorage on change
  const handleLayoutChange = (newLayout: Layout) => {
    setLayout(newLayout);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(newLayout));
  };

  const resetLayout = () => {
    setLayout(defaultLayout);
    localStorage.removeItem(STORAGE_KEY);
  };

  return (
    <div>
      <button onClick={resetLayout}>Reset Layout</button>

      <DndGrid
        layout={layout}
        cols={12}
        rowHeight={50}
        width={1200}
        onLayoutChange={handleLayoutChange}
      >
        {layout.map((item) => (
          <div key={item.i} className="grid-item">
            {item.i}
          </div>
        ))}
      </DndGrid>
    </div>
  );
}
```
