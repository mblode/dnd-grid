@layer dnd-grid-base {
  .dnd-grid {
    position: relative;
    transition: height var(--dnd-grid-transition-duration, 200ms)
      var(--dnd-grid-transition-easing, ease);
  }

  .dnd-grid-item {
    position: absolute;
    box-sizing: border-box;
    overflow: visible;
    transition: transform var(--dnd-grid-transition-duration, 200ms)
      var(--dnd-grid-transition-easing, cubic-bezier(0.2, 0, 0, 1));
    --dnd-grid-radius-value: var(--dnd-grid-radius, 24px);
    --dnd-grid-scale-value: var(--dnd-grid-scale, 1);
  }

  .dnd-grid-item img {
    pointer-events: none;
    user-select: none;
  }

  /* State-based functional styles */
  .dnd-grid-item.resizing {
    transition: none;
    z-index: 10;
    will-change: width, height;
    opacity: 1;
  }

  .dnd-grid-item.dnd-draggable-dragging {
    transition: none;
    z-index: 3;
    will-change: transform;
  }

  .dnd-grid-item.dnd-draggable-dragging > .react-resizable-handle {
    opacity: 0;
    pointer-events: none;
  }

  /* Settling items use JS springs, not CSS transitions */
  .dnd-grid-item.dnd-grid-animating {
    transition: none;
    z-index: 3;
    will-change: transform;
  }

  .dnd-grid-item.dropping {
    visibility: hidden;
  }

  .dnd-grid-item.dnd-grid-placeholder {
    transition-duration: 100ms;
    z-index: 2;
    user-select: none;
  }

  .dnd-grid-item.dnd-grid-placeholder.placeholder-resizing {
    transition: none;
  }

  /* Resize handle positioning (functional) */
  .dnd-grid-item > .react-resizable-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    opacity: 0;
  }

  .dnd-grid-item > .react-resizable-handle::after {
    content: "";
    position: absolute;
    width: 40px;
    height: 40px;
    opacity: 0;
    border: none;
  }

  .react-resizable-hide > .react-resizable-handle {
    display: none;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-sw {
    bottom: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    left: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    cursor: sw-resize;
    transform: translate(-50%, 50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-sw::after {
    bottom: -10px;
    left: -10px;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-se {
    bottom: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    right: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    cursor: se-resize;
    transform: translate(50%, 50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-se::after {
    bottom: -12px;
    right: -12px;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-nw {
    top: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    left: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    cursor: nw-resize;
    transform: translate(-50%, -50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-nw::after {
    top: -10px;
    left: -10px;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-ne {
    top: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    right: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    cursor: ne-resize;
    transform: translate(50%, -50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-ne::after {
    top: -10px;
    right: -12px;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-w,
  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-e {
    top: 50%;
    cursor: ew-resize;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-w {
    left: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    transform: translate(-50%, -50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-e {
    right: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    transform: translate(50%, -50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-n,
  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-s {
    left: 50%;
    cursor: ns-resize;
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-n {
    top: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    transform: translate(-50%, -50%);
  }

  .dnd-grid-item > .react-resizable-handle.react-resizable-handle-s {
    bottom: calc(
      (var(--dnd-grid-radius-value) * 0.29) *
      var(--dnd-grid-scale-value)
    );
    transform: translate(-50%, 50%);
  }

  .react-resizable {
    position: relative;
  }

  .react-resizable-handle {
    position: absolute;
    background-repeat: no-repeat;
    background-origin: content-box;
    box-sizing: border-box;
    background-image: none;
    background-position: bottom right;
    padding: 0 3px 3px 0;
  }

  /* Draggable cursor states */
  .dnd-grid-dragHandleExample {
    cursor: move;
    cursor: grab;
  }

  .react-draggable-transparent-selection {
    user-select: none;
  }

  body.dnd-grid-no-select {
    -webkit-user-select: none;
    user-select: none;
  }

  body.dnd-grid-dragging,
  body.dnd-grid-dragging * {
    cursor: grabbing;
  }

  body.dnd-grid-resizing,
  body.dnd-grid-resizing * {
    cursor: var(--dnd-grid-resize-cursor, se-resize);
  }

  /* Demo/example content positioning */
  .dnd-grid-item .text {
    font-size: 24px;
    text-align: center;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    height: 24px;
  }

  .dnd-grid-item .minMax {
    font-size: 12px;
  }

  .dnd-grid-item .add {
    cursor: pointer;
  }
}
