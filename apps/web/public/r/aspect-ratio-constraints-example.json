{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "aspect-ratio-constraints-example",
  "type": "registry:component",
  "title": "Aspect ratio constraints",
  "description": "Lock item resizing to a ratio.",
  "dependencies": ["@dnd-grid/react", "react-draggable", "react-resizable"],
  "css": {
    "@import \"@dnd-grid/react/styles.css\"": {}
  },
  "files": [
    {
      "path": "examples/dnd-grid-aspect-ratio-constraints-example.tsx",
      "type": "registry:component",
      "content": "\"use client\";\n\nimport {\n  applySizeConstraints,\n  aspectRatio,\n  type ConstraintContext,\n  defaultConstraints,\n  DndGrid,\n  type Layout,\n  useContainerWidth,\n} from \"@dnd-grid/react\";\nimport * as React from \"react\";\n\nconst COLS = 12;\nconst ROW_HEIGHT = 50;\nconst GRID_SPACING = 10;\n\nconst ratio16x9 = aspectRatio(16 / 9);\nconst ratio1x1 = aspectRatio(1);\n\nconst baseLayout: Layout = [\n  { id: \"16:9\", x: 0, y: 0, w: 6, h: 3, constraints: [ratio16x9] },\n  { id: \"1:1\", x: 6, y: 0, w: 3, h: 3, constraints: [ratio1x1] },\n  { id: \"free\", x: 9, y: 0, w: 3, h: 2 },\n];\n\nconst createConstraintContext = (\n  layout: Layout,\n  containerWidth: number,\n): ConstraintContext => ({\n  cols: COLS,\n  maxRows: Number.POSITIVE_INFINITY,\n  containerWidth,\n  containerHeight: 0,\n  rowHeight: ROW_HEIGHT,\n  gap: [GRID_SPACING, GRID_SPACING, GRID_SPACING, GRID_SPACING],\n  containerPadding: [GRID_SPACING, GRID_SPACING, GRID_SPACING, GRID_SPACING],\n  layout,\n});\n\nconst applyInitialConstraints = (\n  layout: Layout,\n  containerWidth: number,\n): Layout => {\n  const context = createConstraintContext(layout, containerWidth);\n  return layout.map((item) => {\n    if (!item.constraints?.length) return item;\n    const size = applySizeConstraints(\n      defaultConstraints,\n      item,\n      item.w,\n      item.h,\n      \"se\",\n      context,\n    );\n    if (size.w === item.w && size.h === item.h) return item;\n    return { ...item, ...size };\n  });\n};\n\nexport function AspectRatioConstraintsExample() {\n  const { width, containerRef, mounted } = useContainerWidth({\n    measureBeforeMount: true,\n  });\n  const [layout, setLayout] = React.useState<Layout>(baseLayout);\n  const [ready, setReady] = React.useState(false);\n\n  React.useEffect(() => {\n    if (!mounted || width <= 0 || ready) return;\n    setLayout(applyInitialConstraints(baseLayout, width));\n    setReady(true);\n  }, [mounted, ready, width]);\n\n  return (\n    <div ref={containerRef}>\n      {mounted && ready && (\n        <DndGrid\n          layout={layout}\n          cols={COLS}\n          rowHeight={ROW_HEIGHT}\n          width={width}\n          gap={GRID_SPACING}\n          containerPadding={GRID_SPACING}\n          onLayoutChange={setLayout}\n        >\n          {layout.map((item) => (\n            <div key={item.id} className=\"grid-item\">\n              {item.id}\n            </div>\n          ))}\n        </DndGrid>\n      )}\n    </div>\n  );\n}\n"
    }
  ]
}
